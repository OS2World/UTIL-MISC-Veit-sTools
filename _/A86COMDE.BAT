@ECHO OFF
REM %1.A86 Quelle
REM %2     Zielverzeichnis

IF [%TMP%]==[] GOTO FEHLER
SET DEEN_COM=..\DEEN_COM
IF [%DEEN_COM%]==[] GOTO FEHLER
IF NOT EXIST %DEEN_COM%\NUL GOTO FEHLER

REM (* 2* A86 -¯ COM *)
CALL A86COM %1 %TMP%\ DDD - ^DEUTSCH
IF NOT EXIST %TMP%\%1.DDD GOTO FEHLER
CALL A86COM %1 %TMP%\ EEE - ^ENGLISCH
IF NOT EXIST %TMP%\%1.EEE GOTO FEHLER

REM (* COM -¯ A86 DB *)
BIN_A86 %TMP%\%1.DDD %TMP%\D_.A86
BIN_A86 %TMP%\%1.EEE %TMP%\E_.A86
IF NOT EXIST %TMP%\D_.A86 GOTO FEHLER
DEL %TMP%\%1.DDD
DEL %TMP%\%1.EEE

REM (* A86 DB -¯ COM *)
ECHO include %DEEN_COM%\DEEN_COM.001> %TMP%\DE.A86
ECHO include %TMP%\D_.A86          >>%TMP%\DE.A86
ECHO include %DEEN_COM%\DEEN_COM.002>>%TMP%\DE.A86
ECHO include %TMP%\E_.A86          >>%TMP%\DE.A86
ECHO include %DEEN_COM%\DEEN_COM.003>>%TMP%\DE.A86
CALL A86 %TMP%\DE.A86 TO %TMP%\%1.COM,NUL
IF NOT EXIST %TMP%\%1.COM GOTO FEHLER
DEL %TMP%\DE.A86
DEL %TMP%\D_.A86
DEL %TMP%\E_.A86
SIEGEL %TMP%\%1.COM
IF NOT [%2]==[%TMP%\] COPY %TMP%\%1.COM %2%1.COM
IF NOT [%2]==[%TMP%\] DEL  %TMP%\%1.COM
CALL TBSX %2%1.COM /MONO
GOTO ENDE

:FEHLER
ECHO %0: %1,%2
PAUSE

:ENDE
